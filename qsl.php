

CREATE TABLE `gloss` (
  `id` int(11) NOT NULL,
  `title` varchar(255) NOT NULL,
  `price` varchar(255) NOT NULL,
  `description` text NOT NULL,
  `image` varchar(255) NOT NULL,
  `date_added` date NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `emulsion`
--

INSERT INTO `gloss` (`id`, `title`, `price`, `description`, `image`, `date_added`) VALUES

(1, 'Off-white', '4500', 'Gloss', 'imgs/eml-gls-colors/offwhite.png', '2017-02-01'),
(2, 'Sunflower', '4500', 'Gloss', 'imgs/eml-gls-colors/sunflower.png', '2017-02-02'),
(3, 'Lilac-haze', '4500', 'Gloss', 'imgs/eml-gls-colors/lilachaze.png', '2017-02-03'),
(4, 'Light-green', '4500', 'Gloss', 'imgs/eml-gls-colors/lightgreen.png', '2017-02-04'),
(5, 'Lilac-romantic', '4500', 'Gloss', 'imgs/eml-gls-colors/Lilacromantic.png', '2017-02-04'),
(6, 'Harmony-pink', '4500', 'Gloss', 'imgs/eml-gls-colors/harmonypink.png', '2017-02-04'),
(7, 'Golden-yellow', '4500', 'Gloss', 'imgs/eml-gls-colors/goldenyellow.png', '2017-02-04'),
(8, 'Rose-pink', '4500', 'Gloss', 'imgs/eml-gls-colors/rosepink.png', '2017-02-04'),
(9, 'Sky-blue', '4500', 'Gloss', 'imgs/eml-gls-colors/skyblue.png', '2017-02-04'),
(10, 'Leaf-green', '4500', 'Gloss', 'imgs/eml-gls-colors/leafgreen.png', '2017-02-04'),
(11, 'Silver-grey', '4500', 'Gloss', 'imgs/eml-gls-colors/silvergrey.png', '2017-02-04'),
(12, 'Pale-beige', '4500', 'Gloss', 'imgs/eml-gls-colors/palebeige.png', '2017-02-04'),
(13, 'Orange', '4500', 'Gloss', 'imgs/eml-gls-colors/orange.png', '2017-02-04'),
(14, 'Rose', '4500', 'Gloss', 'imgs/eml-gls-colors/rose.png', '2017-02-04'),
(15, 'Light-blue', '4500', 'Gloss', 'imgs/eml-gls-colors/lightblue.png', '2017-02-04'),
(16, 'Aloevera', '4500', 'Gloss', 'imgs/eml-gls-colors/aloevera.png', '2017-02-04'),
(17, 'Mushroom', '4500', 'Gloss', 'imgs/eml-gls-colors/mushroom.png', '2017-02-04'),
(18, 'Russet', '4500', 'Gloss', 'imgs/eml-gls-colors/russet.png', '2017-02-04'),
(19, 'Tile-red', '4500', 'Gloss', 'imgs/eml-gls-colors/tilered.png', '2017-02-04'),
(20, 'Pacific-blue', '4500', 'Gloss', 'imgs/eml-gls-colors/pacificblue.png', '2017-02-04'),
(21, 'Apple-green', '4500', 'Gloss', 'imgs/eml-gls-colors/applegreen.png', '2017-02-04'),
(22, 'Ice-grey', '4500', 'Gloss', 'imgs/eml-gls-colors/icegrey.png', '2017-02-04'),
(23, 'Cream', '4500', 'Gloss', 'imgs/eml-gls-colors/cream.png', '2017-02-04'),
(24, 'Coffee', '4500', 'Gloss', 'imgs/eml-gls-colors/coffee.png', '2017-02-04'),
(25, 'Hazel-brown', '4500', 'Gloss', 'imgs/eml-gls-colors/hazelbrown.png', '2017-02-04'),
(26, 'Brilliant-blue', '4500', 'Gloss', 'imgs/eml-gls-colors/brilliantblue.png', '2017-02-04'),
(27, 'National-green', '4500', 'Gloss', 'imgs/eml-gls-colors/nationalgreen.png', '2017-02-04'),
(28, 'Dove-grey', '4500', 'Gloss', 'imgs/eml-gls-colors/davegrey.png', '2017-02-04'),
(29, 'Sand', '4500', 'Gloss', 'imgs/eml-gls-colors/sand.png', '2017-02-04'),
(30, 'Rich-brown', '4500', 'Gloss', 'imgs/eml-gls-colors/richbrown.png', '2017-02-04'),
(31, 'Literat-red', '4500', 'Gloss', 'imgs/eml-gls-colors/literatered.png', '2017-02-04'),
(32, 'Sexy-pink', '4500', 'Gloss', 'imgs/eml-gls-colors/sexypink.png', '2017-02-04'),
(33, 'Purple', '4500', 'Gloss', 'imgs/eml-gls-colors/purple.png', '2017-02-04'),
(34, 'Ash-grey', '4500', 'Gloss', 'imgs/eml-gls-colors/ashgrey.png', '2017-02-04'),
(35, 'Bamboo', '4500', 'Gloss', 'imgs/eml-gls-colors/bamboo.png', '2017-02-04'),
(36, 'Chocolate', '4500', 'Gloss', 'imgs/eml-gls-colors/chocolate.png', '2017-02-04'),
(37, 'Dusted-damson', '4500', 'Gloss', 'imgs/eml-gls-colors/dusteddamson.png', '2017-02-04'),
(38, 'Strawberry', '4500', 'Gloss', 'imgs/eml-gls-colors/strawberry.png', '2017-02-04'),
(39, 'Dark-grey', '4500', 'Gloss', 'imgs/eml-gls-colors/darkgrey.png', '2017-02-04'),
(40, 'Pale-blue', '4500', 'Gloss', 'imgs/eml-gls-colors/paleblue.png', '2017-02-04'),
(41, 'Neutral', '4500', 'Gloss', 'imgs/eml-gls-colors/neutral.png', '2017-02-04'),
(42, 'Postoffice-red', '4500', 'Gloss', 'imgs/eml-gls-colors/postofficered.png', '2017-02-04');

--
-- Indexes for dumped tables
--

--
-- Indexes for table `emulsion`
--
ALTER TABLE `emulsion`;
  ADD PRIMARY KEY (`id`);

--
-- AUTO_INCREMENT for dumped tables
--

--
-- AUTO_INCREMENT for table `emulsion`
--
ALTER TABLE `emulsion`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=5;COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;



<div class="text-center container-fluid white p-3" style="margin: 0 auto; float: none; text-align: center;">
	<div class="row col-lg-12" style="padding-top: 4em;">
		<?php
			$mysqli = new mysqli("localhost", "root", "", "products");
			if ($mysqli->connect_errno) {
				// echo "<script>alert('')</script>";
				echo "Failed connect(".$mysqli->connect_errno.")".$mysqli->connect_errno;
			}
			$query = $mysqli->query("SELECT id,title,price,description,image,quantity FROM cart");
			while ($row = $query->fetch_assoc()){
			$total= 0;
		?>
		<div class="col-lg-3 text-center bg-white p-3 mb-3">
						<div class="card">
						<img src="<?php echo $row['image']; ?>" class="img-responsive"/>
						<h5  class="text-muted"><?php echo $row["title"]; ?></h5>
						<i class="text-muted"><?php echo $row["description"]; ?></i>
						<i class="text-muted"><?php echo $row["price"]; ?> x <?php echo $row["quantity"]; ?></i>
						<i class="text-muted">N<?php echo number_format($row["quantity"] * $row["price"], 2) ?></i>
							<div class="p-4">
								<a name="del" href="?idd=<?php echo $row['id'] ?>" class="text-white btn red btn-lg">Delete</a>
								<!-- <a type="submit" class="text-white btn red btn-lg">Delete</a> -->
							</div>
						</div>
		</div>
		<?php
			$total = $total + ($row["quantity"] * $row["price"]);
		}
		if (isset($_GET['idd'])) {
			echo "<script>confirm('Are you sure you want to delete item?')</script>";
			$idd = $_GET['idd'];
			$del ="<script>document.write($idd)</script>";
			$result = $mysqli->query('DELETE FROM cart WHERE id=id LIMIT 1');
			 // $result = $mysqli->query('DELETE FROM cart WHERE id="$del" LIMIT 1');
			if ($result) {
				header("location: index.php#test4");
				echo "<script>
						alert('successfull delete of item id $idd');
						window.location.href='index.php#test4';
					</script>";

			}else{
				echo "<script>
						alert('Failed to delete item');
						window.location.href='index.php#test4';
					</script>";
			}
		}
		?>
	</div>
</div>

<nav class="navbar green-body white fixed-top mt-5">
	<a class="text-muted fa-1x" style="float: left !important;">Total: N<?php echo number_format($total, 2); ?></a>
	<ul class="nav-content right">
		<li><a class="btn red text-white order-btn" href="?del=<?php echo $row['id'] ?>">Delete All</a></li>
		<li><a class="btn green-body text-white order-btn"  data-toggle="modal" data-target="#details-7" onclick="">Checkout <i class="fa fa-shopping-cart"></i></a></li>
	</ul>
</nav>
		<?php  include 'pop.php'; ?>

<?php
if (isset($_GET['del'])) {
			echo "<script>confirm('Are you sure you want to delete all items?')</script>";
			$result = $mysqli->query('DELETE FROM cart WHERE id=id');
			 // $result = $mysqli->query('DELETE FROM cart WHERE id="$del" LIMIT 1');
			if ($result) {
				header("location: index.php#test4");
				echo "<script>
						alert('All items successfully deleted');
						window.location.href='index.php#test4';
					</script>";

			}else{
				echo "<script>
						alert('Failed to delete items');
						window.location.href='index.php#test4';
					</script>";
			}
		}
?>

<style type="text/css">
	@media (max-width: 1200px){
		.order-btn{
		margin-right: 10px;
		padding: 0px;	
		width: 100%;
		font-size: 10px;
		text-align: center;
	}
	}
</style>